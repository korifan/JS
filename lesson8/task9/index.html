<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lesson 8 Task 9</title>
    <style></style>
  </head>

  <body>
    <a href="../../index.html">JS Homeworks</a>
    /
    <a href="../../lesson8/index.html">Lesson 8</a>
    / Task 9

    <h1>Task 9</h1>
    <p>
      Задача 9. Морський бій. Користувач вводить кількість клітинок
      одновимірного масиву та кількість одиночних кораблів. Комп’ютер довільно
      розміщує ці одиночні кораблі у масиві по один у клітинці (якщо у клітинці
      0, то клітинка пуста, якщо 1 – то це означає, що там є корабель.
      Користувач вводить номер клітинки, куди стріляє. Гра продовжується до тих
      пір, поки не будуть потоплені усі кораблі.
    </p>

    <h2>Results</h2>

    <script>
      // Create the array that will be filled by concecutive numbers.

      const cellsNumber = parseInt(prompt("Enter number of cells"))
      const shipsNumber = parseInt(prompt("Enter number of ships"))

      // get array with zeros
      arrCells = []
      for (i = 0; i < cellsNumber; i++) {
        arrCells.push(0)
      }
      // console.log(arrCells)

      // Function to insert randomly 1 into the arrCells
      function insertElement(arr, cells, ships) {
        // loop to incert 1 inot cells array
        for (let i = 0; i < ships; i++) {
          // get random index position from 0 to cells
          let randomIndex = Math.floor(Math.random() * cells)
          if (arr[randomIndex] == 0) {
            arr[randomIndex] = 1
          } else {
            i--
          }
        }
        return arr
      }
      console.log(insertElement(arrCells, cellsNumber, shipsNumber))

      // Destroy ships functionality
      // get array's sum for feedback
      let shipsLeft = shipsNumber
      let hitMessage = ""
      // Loop that lets an user to pick number to hit the ships until all of them are gone.
      for (let i = 0; i < 3; i++) {
        let userFireNum = parseInt(
          prompt(
            `${hitMessage} There are ${shipsLeft} ships left. \nEnter number from 0 to ${cellsNumber} to hit ships`
          )
        )
        // Check if there are still more ships left.
        if (arrCells[userFireNum] == 1) {
          shipsLeft -= arrCells[userFireNum]
          console.log(`Total ships left: ${shipsLeft}`)
          arrCells[userFireNum] = 0 // change element's value back to 0
          hitMessage = `#${userFireNum} is right on target!`
          // if there are more ships left decrease the index by one so it would continue looping
        } else {
          i--
          hitMessage = "Oops, You missed."
        }
      }
      // show congrats message
      document.write("Congrats! All enemy ships are now gone!")
    </script>
  </body>
</html>
