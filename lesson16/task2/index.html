<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lesson 15 Task 2</title>
    <style>
      table {
        border: 1px solid #000;
      }
      td {
        border: 1px solid #000;
        vertical-align: top;
        padding: 10px;
      }
    </style>
  </head>

  <body>
    <a href="../../index.html">JS Homeworks</a>
    /
    <a href="../../lesson15/index.html">Lesson 15</a>
    / Task 2

    <h1>Task 2</h1>
    <p>Створити об’єкт «Авто».</p>
    <table>
      <tr>
        <td>Авто</td>
        <td></td>
      </tr>
      <tr>
        <td>Поля(властивості)</td>
        <td>
          Марка
          <br />
          Розмір бака
          <br />
          Кількість наявних літрів
          <br />
          Кількість місць
          <br />
          Кількість пасажирів
        </td>
      </tr>
      <tr>
        <td>Методи (дії)</td>
        <td>
          Заправка на вказану кількість літрів
          <br />
          Виведення кількості пасажирів
          <br />
          Додавання пасажирів
          <br />
          Висадка пасажирів
        </td>
      </tr>
    </table>
    <h2>Results</h2>

    <script>
      let auto = {
        // properties
        model: "Audi",
        fuelTankCapacity: 20,
        currentFuelAmount: 12,
        seatsNumber: 7,
        passengersNumber: 5,

        // methods
        // Заправка на вказану кількість літрів
        getFuel: function () {
          let fuelNeeded = this.fuelTankCapacity - this.currentFuelAmount
          let userFuelLiters = 0
          let totalLiters = this.currentFuelAmount
          // ask user to fill the tank (litters)
          do {
            userFuelLiters = parseInt(
              prompt(
                `Enter number of liters to fill the tank \n(no more than ${fuelNeeded} litters)`
              )
            )
            totalLiters = this.currentFuelAmount + userFuelLiters
            // check if user exceeds tank capacity
            if (totalLiters > this.fuelTankCapacity)
              alert(
                `${userFuelLiters} litters will exceed vehicle's tank capacity. Try no more than ${fuelNeeded} litters`
              )
          } while (totalLiters > this.fuelTankCapacity)

          return (this.currentFuelAmount =
            this.currentFuelAmount + userFuelLiters)
        },

        // Виведення кількості пасажирів
        getPassengers: function () {
          document.write(
            `<br>Number of passengers: ${this.passengersNumber}<br>`
          )
        },

        // Додавання пасажирів
        addPassengers: function () {
          let passengersNeeded = this.seatsNumber - this.passengersNumber
          let userPassengers = 0
          let totalPassengers = this.passengersNumber
          // ask user how much passengers to add
          do {
            userPassengers = parseInt(
              prompt(
                `Enter number of passengers to add \n(no more than ${passengersNeeded})`
              )
            )
            totalPassengers = this.passengersNumber + userPassengers
            // check if user passengers esceed number of seats
            if (totalPassengers > this.seatsNumber)
              alert(
                `${userPassengers} passengers is more than number of seats. You can seat no more than ${passengersNeeded} passengers`
              )
          } while (totalPassengers > this.seatsNumber)

          return (this.passengersNumber =
            this.passengersNumber + userPassengers)
        },

        // Висадка пасажирів
        dropOffPassengers: function () {
          let userPassengers = 0
          let totalPassengers = this.passengersNumber
          // ask user how much passengers to drop off
          do {
            userPassengers = parseInt(
              prompt(
                `Enter number of passengers to drop off \n(no more than ${totalPassengers})`
              )
            )
            // check if user has too many or 0 passengers
            if (userPassengers > totalPassengers)
              alert(
                `${userPassengers} passengers are more than total passengers. You can drop off no more than ${totalPassengers} passengers`
              )
            else if (userPassengers == 0) {
              alert(`You need to drop off someone.`)
            } else totalPassengers = this.passengersNumber - userPassengers
          } while (totalPassengers == this.passengersNumber)

          return (this.passengersNumber =
            this.passengersNumber - userPassengers)
        }
      }

      // call add fuel function
      let moreFuel = auto.getFuel()
      document.write(`Fuel amount after fueling: ${auto.currentFuelAmount}`)

      // render number of passengers function
      let passengersNum = auto.getPassengers()

      // call add passengers function
      let morePassengers = auto.addPassengers()
      document.write(
        `Number of passengers after adding: ${auto.passengersNumber}`
      )

      // call drop off passengers function
      let dropPassengers = auto.dropOffPassengers()
      document.write(
        `Number of passengers after dropping off: ${auto.passengersNumber}`
      )
    </script>
  </body>
</html>
