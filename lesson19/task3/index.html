<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lesson 19 task 3</title>
  </head>
  <body>
    <a href="../../index.html">JS Homeworks</a>
    /
    <a href="../../lesson19/index.html">Lesson 19</a>
    / Task 3

    <h1>Task 3</h1>
    <p>
      Відобразити падаючий сніг. Сніжинка з’являється у верхній частині екрану і
      з випадковою швидкістю рухається вниз. Як тільки сніжинка досягає нижньої
      частини екрану вона знову повинна з’явитись у верхній частині екрану.
    </p>
    <div id="container"></div>
    <script>
      class UserAge {
        constructor(currentyear) {
          this.currentyear = currentyear
        }
        // method
        getUserAge() {
          const birthyear = parseInt(this.inp.value)
          this.showAge.innerText = ""
          if (birthyear > this.currentyear) {
            this.showAge.innerText = `Error: your birth year cannot be more than ${this.currentyear}`
          } else {
            let useryear = this.currentyear - birthyear
            this.showAge.innerText = useryear
          }
        }

        render(containerId) {
          // create label and input filed
          const lbl = document.createElement("label")
          lbl.innerText = "Enter your birth year : "
          // create input
          this.inp = document.createElement("input")
          this.inp.setAttribute("type", "text")
          lbl.append(this.inp)

          // render button
          const btn = document.createElement("button")
          btn.innerText = "Get my age"
          // Binding the function
          btn.onclick = this.getUserAge.bind(this)

          // render results
          const resultsDiv = document.createElement("div")
          const hr = document.createElement("hr")
          const lblAge = document.createElement("label")
          lblAge.innerText = "your age is: "
          this.showAge = document.createElement("div")
          this.showAge.innerHTML = ""
          lblAge.append(this.showAge)
          resultsDiv.append(hr, lblAge)

          // Target container
          const targetContainer = document.getElementById(containerId)
          targetContainer.append(lbl, btn, resultsDiv)
        }
      }
      const date = new Date()
      this.currentyear = date.getFullYear()
      const age = new UserAge(currentyear)
      age.render("container")
    </script>
  </body>
</html>
